import{c as b,u as _,a as y,b as r,h as C,g as $,d as w,e as S,f as Q,i as k,r as h,j as x,k as q,o as B,t as I,w as z,l as A,m as D,n as l,p as i,q as v,Q as L,s as R,v as p,x as V,y as N,z as U,A as j,S as P}from"./index.ff090ca2.js";import{Q as T,a as F}from"./QLayout.fc8f9fb3.js";const M={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},m={xs:2,sm:4,md:8,lg:16,xl:24};var W=b({name:"QSeparator",props:{..._,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const s=$(),a=y(e,s.proxy.$q),n=r(()=>e.vertical===!0?"vertical":"horizontal"),u=r(()=>` q-separator--${n.value}`),c=r(()=>e.inset!==!1?`${u.value}-${M[e.inset]}`:""),d=r(()=>`q-separator${u.value}${c.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?" q-separator--dark":"")),t=r(()=>{const o={};if(e.size!==void 0&&(o[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const f=e.spaced===!0?`${m.md}px`:e.spaced in m?`${m[e.spaced]}px`:e.spaced,g=e.vertical===!0?["Left","Right"]:["Top","Bottom"];o[`margin${g[0]}`]=o[`margin${g[1]}`]=f}return o});return()=>C("hr",{class:d.value,style:t.value,"aria-orientation":n.value})}}),H=b({name:"QCardActions",props:{...w,vertical:Boolean},setup(e,{slots:s}){const a=S(e),n=r(()=>`q-card__actions ${a.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>C("div",{class:n.value},Q(s.default))}});const E={class:"full-height"},G=v("div",{class:"row items-center no-wrap"},[v("div",{class:"col"},[v("div",{class:"text-h6"},"Spotify App Client ID")])],-1),O=k({__name:"LoginLayout",setup(e){const s=h("id"),a=P,n=x(),u=q();let c,d=h(!0);return B(()=>{let t=window.location.href;t.includes("musical-bingo/#")||(console.info("Fixing URL to have a hash."),t=t.replace("musical-bingo/","musical-bingo/#/"),window.location.href=decodeURIComponent(t)),c=u.query.code,c?a.loginWithCode(c).subscribe(()=>{n.push("/dashboard")}):(a.refresh_token&&a.refreshToken().pipe(I(()=>{n.push("/dashboard"),d.value=!1})).subscribe(),d.value=!1),s.value=a.clientID,a.isLoggedIn&&n.push("/dashboard")}),z(s,t=>{a.clientID=t}),(t,o)=>(A(),D(F,{view:"hHh lpR fFf",class:"column justify-center"},{default:l(()=>[i(T,{class:"fit row wrap justify-center items-start content-start"},{default:l(()=>[v("div",E,[i(L,{flat:"",bordered:"",class:R(["my-card",t.$q.dark.isActive?"bg-grey-9":"bg-grey-2"])},{default:l(()=>[i(p,null,{default:l(()=>[G]),_:1}),i(p,null,{default:l(()=>[i(V,{square:"",outlined:"",modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=f=>s.value=f),label:"Spotify Web App Client ID"},null,8,["modelValue"])]),_:1}),i(W),i(H,null,{default:l(()=>[i(N,{flat:"",onClick:o[1]||(o[1]=f=>U(a).loginNoCode()),disable:!s.value},{default:l(()=>[j("Login")]),_:1},8,["disable"])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}});export{O as default};

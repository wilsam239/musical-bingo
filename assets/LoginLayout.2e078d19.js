import{c as b,u as C,a as _,b as c,h as y,g as w,d as $,r as h,e as S,f as k,o as x,t as Q,w as I,i as q,j as B,k as n,l as o,m,Q as D,n as L,p,q as R,s as z,v as V,x as A,S as N}from"./index.7c085065.js";import{Q as U,a as j,b as T}from"./QLayout.6d1f9686.js";const F={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},v={xs:2,sm:4,md:8,lg:16,xl:24};var M=b({name:"QSeparator",props:{...C,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const i=w(),t=_(e,i.proxy.$q),l=c(()=>e.vertical===!0?"vertical":"horizontal"),u=c(()=>` q-separator--${l.value}`),r=c(()=>e.inset!==!1?`${u.value}-${F[e.inset]}`:""),d=c(()=>`q-separator${u.value}${r.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(t.value===!0?" q-separator--dark":"")),a=c(()=>{const s={};if(e.size!==void 0&&(s[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const f=e.spaced===!0?`${v.md}px`:e.spaced in v?`${v[e.spaced]}px`:e.spaced,g=e.vertical===!0?["Left","Right"]:["Top","Bottom"];s[`margin${g[0]}`]=s[`margin${g[1]}`]=f}return s});return()=>y("hr",{class:d.value,style:a.value,"aria-orientation":l.value})}});const P={class:"full-height"},W=m("div",{class:"row items-center no-wrap"},[m("div",{class:"col"},[m("div",{class:"text-h6"},"Spotify App Client ID")])],-1),G=$({__name:"LoginLayout",setup(e){const i=h("id"),t=N,l=S(),u=k();let r,d=h(!0);return x(()=>{let a=window.location.href;a.includes("musical-bingo/#")||(console.info("Fixing URL to have a hash."),a=a.replace("musical-bingo/","musical-bingo/#/"),window.location.href=decodeURIComponent(a)),r=u.query.code,r?t.loginWithCode(r).subscribe(()=>{l.push("/dashboard")}):(t.refresh_token&&t.refreshToken().pipe(Q(()=>{l.push("/dashboard"),d.value=!1})).subscribe(),d.value=!1),i.value=t.clientID,t.isLoggedIn&&l.push("/dashboard")}),I(i,a=>{t.clientID=a}),(a,s)=>(q(),B(T,{view:"hHh lpR fFf",class:"column justify-center"},{default:n(()=>[o(j,{class:"fit row wrap justify-center items-start content-start"},{default:n(()=>[m("div",P,[o(D,{flat:"",bordered:"",class:L(["my-card",a.$q.dark.isActive?"bg-grey-9":"bg-grey-2"])},{default:n(()=>[o(p,null,{default:n(()=>[W]),_:1}),o(p,null,{default:n(()=>[o(R,{square:"",outlined:"",modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=f=>i.value=f),label:"Spotify Web App Client ID"},null,8,["modelValue"])]),_:1}),o(M),o(U,null,{default:n(()=>[o(z,{flat:"",onClick:s[1]||(s[1]=f=>V(t).loginNoCode()),disable:!i.value},{default:n(()=>[A("Login")]),_:1},8,["disable"])]),_:1})]),_:1},8,["class"])])]),_:1})]),_:1}))}});export{G as default};
